{% extends "base.html" %}

{% block content %}
<!-- start message list section -->
<div class="col-12 col-md-4 col-lg-5 col-xl-3 px-0 messages-page__list-scroll">
  <div class="messages-page__header mb-0 px-4 pt-3 pb-3">
    <span class="messages-page__title">Chats</span>
    <div class="messages-page__dark-mode-toogler">
      <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon svg-icon--dark-mode" viewBox="0 0 49.7 49.7">
        <path d="M25.4,49.7A25.6,25.6,0,0,1,1.3,32.3,25.6,25.6,0,0,1,17.3.1a2,2,0,0,1,2.1.5,2.2,2.2,0,0,1,.5,2.1,19.9,19.9,0,0,0-1.2,6.8A21,21,0,0,0,25,24.7,21,21,0,0,0,40.2,31h0a20.9,20.9,0,0,0,6.9-1.2,2,2,0,0,1,2.5,2.5,25.8,25.8,0,0,1-16,16.1A28.7,28.7,0,0,1,25.4,49.7Z" fill="#f68b3c"/>
      </svg>
    </div>
  </div>

  <ul class="messages-page__list pb-5 px-1 px-md-3">
    {% for message in messages %}
    <li class="messaging-member">
      <div class="messaging-member__wrapper">
        <div class="messaging-member__avatar">
          <img src="https://ui-avatars.com/api/?name={{ message.sender }}&background=random" alt="{{ message.sender }}" loading="lazy">
          <div class="user-status"></div>
        </div>
        <span class="messaging-member__name">{{ message.sender }}</span>
        <span class="messaging-member__message">{{ message.text }}</span>
      </div>
    </li>
    {% endfor %}
  </ul>
</div>
<!-- end message list section -->

<!-- start content section -->
<div class="chat col-12 col-md-8 col-lg-7 col-xl-6 px-0 pl-md-1">
  <div class="chat__container">
    <div class="chat__wrapper py-2 pt-mb-2 pb-md-3">
      <div class="chat__content pt-4 px-3">
        <ul class="chat__list-messages">
          {% for message in messages %}
          <li>
            {% if loop.changed(message.sender) %}
            <div class="chat__time">{{ message.time.strftime('%B %d, %H:%M') }}</div>
            {% endif %}
            <div class="chat__bubble {% if message.sender == current_user %}chat__bubble--me{% else %}chat__bubble--you{% endif %}">
              {{ message.text }}
            </div>
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
<!-- end content section -->
{% endblock %}
